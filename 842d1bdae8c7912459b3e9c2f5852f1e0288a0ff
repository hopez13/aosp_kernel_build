{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "93029bd3_761ec202",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2024-05-23T14:28:05Z",
      "side": 1,
      "message": "This is still WIP, here is the list of things missing:\n * Tests\n * Docs",
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf486189_4150ca62",
        "filename": "BUILD.bazel",
        "patchSetId": 7
      },
      "lineNbr": 363,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "not sure you need them all as separate tools. But ok.",
      "range": {
        "startLine": 347,
        "startChar": 0,
        "endLine": 363,
        "endChar": 0
      },
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff6b1f75_0e1cc3ef",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 27,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "local functions should be _lower_with_under.",
      "range": {
        "startLine": 27,
        "startChar": 4,
        "endLine": 27,
        "endChar": 19
      },
      "fixSuggestions": [
        {
          "fixId": "e4f44c53_8ce79386",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 27,
                "startChar": 0,
                "endLine": 28,
                "endChar": 0
              },
              "replacement": "def _create_graphviz(\n"
            },
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 62,
                "startChar": 0,
                "endLine": 63,
                "endChar": 0
              },
              "replacement": "def _read_graph(\n"
            },
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 94,
                "startChar": 0,
                "endLine": 95,
                "endChar": 0
              },
              "replacement": "    adjacency_list \u003d _read_graph(args.adjacency_list_file)\n"
            },
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 96,
                "startChar": 0,
                "endLine": 97,
                "endChar": 0
              },
              "replacement": "    _create_graphviz(adjacency_list, args.output, args.colors)\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "107d8e0f_c9e9183a",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "request to make this an option in a later change.",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 42,
        "endChar": 20
      },
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d61ca340_664cd167",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "output is already a `pathlib.Path`.",
      "range": {
        "startLine": 59,
        "startChar": 4,
        "endLine": 59,
        "endChar": 7
      },
      "fixSuggestions": [
        {
          "fixId": "387a7ae2_8a9e8401",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 58,
                "startChar": 0,
                "endLine": 60,
                "endChar": 0
              },
              "replacement": "    output.write_text(\"\\n\".join(content), encoding\u003d\"utf-8\")\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a39ac26a_c5a468bd",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 65,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "`adjacency_list_file.open(encoding\u003d\"utf-8\")`\n\n(mode\u003d\"r\" is default and can be omitted).\n\nhttps://docs.python.org/3.12/library/pathlib.html#pathlib.Path.open",
      "range": {
        "startLine": 65,
        "startChar": 14,
        "endLine": 65,
        "endChar": 33
      },
      "fixSuggestions": [
        {
          "fixId": "faf4ef64_ea863c61",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 65,
                "startChar": 0,
                "endLine": 66,
                "endChar": 0
              },
              "replacement": "    with adjacency_list_file.open(encoding\u003d\"utf-8\") as adjacency_list:\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62550a17_a3c9c0e4",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 69,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "use `logging.exception()` automatically adds the context of the active exception, so you can write:\n\n```\n except json.JSONDecodeError:\n            logging.error(\"Failed to load %s\", adjacency_list_file)\n```\n\nhttps://docs.python.org/3.12/library/logging.html#logging.exception",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 25
      },
      "fixSuggestions": [
        {
          "fixId": "b6b023bb_b2bf4599",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 68,
                "startChar": 0,
                "endLine": 70,
                "endChar": 0
              },
              "replacement": "        except json.JSONDecodeError:\n            logging.exception(\"Failed to load %s\", adjacency_list_file)\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d9ad044_6f4cc397",
        "filename": "abi/dependency_graph_drawer.py",
        "patchSetId": 7
      },
      "lineNbr": 74,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "for a",
      "range": {
        "startLine": 74,
        "startChar": 40,
        "endLine": 74,
        "endChar": 41
      },
      "fixSuggestions": [
        {
          "fixId": "1f1f69cf_83600132",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_drawer.py",
              "range": {
                "startLine": 74,
                "startChar": 0,
                "endLine": 75,
                "endChar": 0
              },
              "replacement": "    \"\"\"Creates two maps of dependencies for a directory full of kernel modules.\"\"\"\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4b0d7eb_10ace0cc",
        "filename": "abi/dependency_graph_extractor.py",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "what if there are more?",
      "range": {
        "startLine": 37,
        "startChar": 11,
        "endLine": 37,
        "endChar": 22
      },
      "fixSuggestions": [
        {
          "fixId": "d0981913_8039df58",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_extractor.py",
              "range": {
                "startLine": 34,
                "startChar": 0,
                "endLine": 35,
                "endChar": 0
              },
              "replacement": "    # TODO: Error out if multiple vmlinux are found. b/289031111\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "add1f2a5_0e3d702c",
        "filename": "abi/dependency_graph_extractor.py",
        "patchSetId": 7
      },
      "lineNbr": 62,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-06-03T17:07:19Z",
      "side": 1,
      "message": "not entirely sure you need the functions as they are quite trivial an easy to inline.\n\nmaybe all it needs is one other function to be called from `main` if there is a need to keep `main` small.",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 62,
        "endChar": 0
      },
      "fixSuggestions": [
        {
          "fixId": "2be9fa52_b7da399f",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "abi/dependency_graph_extractor.py",
              "range": {
                "startLine": 38,
                "startChar": 0,
                "endLine": 62,
                "endChar": 0
              },
              "replacement": ""
            },
            {
              "path": "abi/dependency_graph_extractor.py",
              "range": {
                "startLine": 137,
                "startChar": 0,
                "endLine": 139,
                "endChar": 0
              },
              "replacement": "    undefined_symbols \u003d {\n        pathlib.Path(module).name: symbol_extraction.extract_undefined_symbols(\n            module\n        )\n        for module in modules\n    }\n    exported_symbols \u003d {\n        pathlib.Path(blob).name: symbol_extraction.extract_exported_symbols(\n            blob\n        )\n        for blob in [vmlinux] + modules\n    }\n"
            }
          ]
        }
      ],
      "revId": "842d1bdae8c7912459b3e9c2f5852f1e0288a0ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}