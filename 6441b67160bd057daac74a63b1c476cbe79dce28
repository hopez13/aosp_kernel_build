{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a70ee7aa_d611f3e3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-07-22T19:03:56Z",
      "side": 1,
      "message": "Is using relative path \"officially supported\" and set to relative to O\u003d now? If so, (2) makes sense. Otherwise (2) is also fragile.",
      "range": {
        "startLine": 40,
        "startChar": 0,
        "endLine": 40,
        "endChar": 38
      },
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b70e12be_154a7cfa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-07-22T19:03:56Z",
      "side": 1,
      "message": "I think this change would be adequate as a short term solution. What do you suggest we do in the long term? Please leave b/354687198 open if you decide to submit this so we find a way that\u0027s more future proof.\n\nIn the long term, we could have ddk_module()\u0027s adjust M\u003d based on O\u003d. But that won\u0027t fix regular builds.\n\nWe could also create one (1) symlink from M\u003d to O/M.",
      "range": {
        "startLine": 43,
        "startChar": 66,
        "endLine": 44,
        "endChar": 45
      },
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "badbbb6e_e90576bc",
        "filename": "kleaf/impl/ddk/gen_makefiles.py",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1961395
      },
      "writtenOn": "2024-07-22T16:39:07Z",
      "side": 1,
      "message": "Does this need to be updated too?, this doesn\u0027t set `O\u003d` so it might not be required.",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50496068_b0130140",
        "filename": "kleaf/impl/ddk/gen_makefiles.py",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-07-22T19:04:57Z",
      "side": 1,
      "message": "This inherits O\u003d from kernel_module.bzl in the last $@",
      "parentUuid": "badbbb6e_e90576bc",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0c85eaf_1f55b74c",
        "filename": "kleaf/impl/ddk/gen_makefiles.py",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-07-22T19:09:45Z",
      "side": 1,
      "message": "Never mind; this might not have anything to do with $(@) at the end. I don\u0027t know how O\u003d gets passed through; perhaps through environment variables.\n\nThe M\u003d$(M) might also be useless. I\u0027ll leave this to @draszik@google.com to check.",
      "parentUuid": "50496068_b0130140",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "733df28d_290c3cad",
        "filename": "kleaf/impl/ddk/gen_makefiles.py",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1981286
      },
      "writtenOn": "2024-07-26T16:22:37Z",
      "side": 1,
      "message": "I don\u0027t know enough about kleaf to give an educated answer here, I don\u0027t know how to trigger these code paths and I ran out of time to investigate this week. We can look at this next week.",
      "parentUuid": "f0c85eaf_1f55b74c",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6a33ca1_e17796ff",
        "filename": "kleaf/impl/kernel_module.bzl",
        "patchSetId": 1
      },
      "lineNbr": 468,
      "author": {
        "id": 1402878
      },
      "writtenOn": "2024-07-22T15:20:50Z",
      "side": 1,
      "message": "Is that the only location that needs adjusting?",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6753f602_145f74e7",
        "filename": "kleaf/impl/kernel_module.bzl",
        "patchSetId": 1
      },
      "lineNbr": 468,
      "author": {
        "id": 1981286
      },
      "writtenOn": "2024-07-22T15:26:39Z",
      "side": 1,
      "message": "There are lots of other changes (outside kbuild) that prevent me from obtaining a full working build at this point in time, but this gets me further. I\u0027ll confirm once I can boot. I wanted to get your input on this approach early :-)",
      "parentUuid": "b6a33ca1_e17796ff",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c410d551_3001e2a6",
        "filename": "kleaf/impl/kernel_module.bzl",
        "patchSetId": 1
      },
      "lineNbr": 468,
      "author": {
        "id": 1981286
      },
      "writtenOn": "2024-07-26T16:22:37Z",
      "side": 1,
      "message": "Just to confirm, in the end this patch alone was enough to build a bootable image for Pixel (together with relevant driver changes). I am not sure how to test other kleaf use-cases (DDK?), if any.\n\nWe can also see from the previous successful presubmit run that this patch appears to be compatible with both kernel versions, before and after the kbuild changes. Injecting the extra VPATH into the older kbuild should not have any negative side-effects I believe. From my PoV, it could probably be merged early (before the kbuild merge to gki) to reduce friction.",
      "parentUuid": "6753f602_145f74e7",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8e500e0_d6d67d6e",
        "filename": "kleaf/impl/kernel_module.bzl",
        "patchSetId": 1
      },
      "lineNbr": 468,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2024-07-30T18:07:54Z",
      "side": 1,
      "message": "\u003e I am not sure how to test other kleaf use-cases (DDK?), if any.\n\nPresubmit is sufficient. We build DDK modules for cuttlefish and do cf boot tests.",
      "parentUuid": "c410d551_3001e2a6",
      "revId": "6441b67160bd057daac74a63b1c476cbe79dce28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}